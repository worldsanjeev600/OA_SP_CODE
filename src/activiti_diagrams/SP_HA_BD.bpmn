<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/test">
  <signal id="sig" name="sig" activiti:scope="processInstance"></signal>
  <message id="sign" name="sign"></message>
  <process id="SP_HA_BD" name="WHC-Breakdown Workflow for Service Platform" isExecutable="true">
    <userTask id="visit" name="Visit" activiti:candidateGroups="${ROLE_ASSIGNED_TECHVISIT}"></userTask>
    <userTask id="repairAssessment" name="Repair Assessment" activiti:candidateGroups="${ROLE_ASSIGNED_REPAIRASSESSMENT}"></userTask>
    <userTask id="ICDecision" name="IC Decision" activiti:candidateGroups="${ROLE_ASSIGNED_ICDECISION}"></userTask>
    <userTask id="claimSettlement" name="Claim Settlement" activiti:candidateGroups="${ROLE_ASSIGNED_CLAIMSETTLEMENT}"></userTask>
    <exclusiveGateway id="exclusivegateway1" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow12" sourceRef="visit" targetRef="exclusivegateway1"></sequenceFlow>
    <sequenceFlow id="flow13" name="Tech Repair" sourceRef="exclusivegateway1" targetRef="repairAssessment">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${IS_PIN_CODE_SERVICEABLE=='Y' && (shortCircuit==null || shortCircuit=='N')}]]></conditionExpression>
    </sequenceFlow>
    <exclusiveGateway id="exclusivegateway2" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow17" sourceRef="ICDecision" targetRef="exclusivegateway2"></sequenceFlow>
    <exclusiveGateway id="exclusivegateway3" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow18" sourceRef="repairAssessment" targetRef="exclusivegateway3"></sequenceFlow>
    <sequenceFlow id="flow19" name="IC Clause not passed/serviceable Pin Code" sourceRef="exclusivegateway3" targetRef="ICDecision">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${ICClausePassed=='No'}]]></conditionExpression>
    </sequenceFlow>
    <endEvent id="endevent2" name="End"></endEvent>
    <sequenceFlow id="flow21" name="Rejected OR Short Circuit" sourceRef="exclusivegateway2" targetRef="endevent2">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${ICApproval=='Rejected' || shortCircuit=='Y'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow25" name="IC Approved/ BER-Approved Serviceable pin code" sourceRef="exclusivegateway2" targetRef="repairAssessment">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${IS_PIN_CODE_SERVICEABLE=='Y' && (ICApproval=='Approved' || ICApproval=='BER-Approved')}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow30" name="IC Approved/BER-Approved for Non-Serviceable Pincode" sourceRef="exclusivegateway2" targetRef="claimSettlement">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${(IS_PIN_CODE_SERVICEABLE=='N' && (ICApproval=='Approved' || ICApproval=='BER-Approved')) || (IS_PIN_CODE_SERVICEABLE=='Y' && ICApproval=='BER-Approved')}]]></conditionExpression>
    </sequenceFlow>
    <endEvent id="endevent4" name="End"></endEvent>
    <sequenceFlow id="flow31" name="Customer opts for self-repair OR Accidental Damage OR Short Circuit" sourceRef="exclusivegateway3" targetRef="endevent4">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${isCustomerOptForSelfRepair=='Y' || isAccidentalDamage =='Y' || shortCircuit=='Y'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow32" name="Repair Completed OR Customer Asks for Refund OR Appliance pickup done for BER cases" sourceRef="exclusivegateway3" targetRef="claimSettlement">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${isRepairCompleted=='Y' || customerAsksRefund=='Y' || ICApproval=='BER-Approved'}]]></conditionExpression>
    </sequenceFlow>
    <endEvent id="endevent5" name="End"></endEvent>
    <sequenceFlow id="flow33" sourceRef="claimSettlement" targetRef="endevent5"></sequenceFlow>
    <userTask id="icDoc" name="IC Doc" activiti:candidateGroups="${ROLE_ASSIGNED_VERIFICATION}"></userTask>
    <sequenceFlow id="flow34" name="Self Repair" sourceRef="exclusivegateway1" targetRef="icDoc">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${IS_PIN_CODE_SERVICEABLE=='N' && (shortCircuit==null || shortCircuit=='N')}]]></conditionExpression>
    </sequenceFlow>
    <exclusiveGateway id="exclusivegateway6" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow35" sourceRef="icDoc" targetRef="exclusivegateway6"></sequenceFlow>
    <sequenceFlow id="flow36" name="Estimated Invoice verified" sourceRef="exclusivegateway6" targetRef="ICDecision">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${isEstimatedInvoiceVerified=='Y'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow37" name="Estimated Invoice not verified" sourceRef="exclusivegateway6" targetRef="visit">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${isEstimatedInvoiceVerified=='N'}]]></conditionExpression>
    </sequenceFlow>
    <startEvent id="startevent1" name="Start"></startEvent>
    <sequenceFlow id="flow38" sourceRef="startevent1" targetRef="visit"></sequenceFlow>
    <endEvent id="endevent6" name="End"></endEvent>
    <sequenceFlow id="flow39" name="Short-Circuit" sourceRef="exclusivegateway1" targetRef="endevent6">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${shortCircuit=='Y'}]]></conditionExpression>
    </sequenceFlow>
    <endEvent id="endevent7" name="End"></endEvent>
    <sequenceFlow id="flow40" name="Short Circuit" sourceRef="exclusivegateway6" targetRef="endevent7">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${shortCircuit=='Y'}]]></conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_SP_HA_BD">
    <bpmndi:BPMNPlane bpmnElement="SP_HA_BD" id="BPMNPlane_SP_HA_BD">
      <bpmndi:BPMNShape bpmnElement="visit" id="BPMNShape_visit">
        <omgdc:Bounds height="55.0" width="105.0" x="149.0" y="139.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="repairAssessment" id="BPMNShape_repairAssessment">
        <omgdc:Bounds height="55.0" width="105.0" x="410.0" y="140.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ICDecision" id="BPMNShape_ICDecision">
        <omgdc:Bounds height="55.0" width="105.0" x="410.0" y="454.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="claimSettlement" id="BPMNShape_claimSettlement">
        <omgdc:Bounds height="55.0" width="111.0" x="809.0" y="141.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway1" id="BPMNShape_exclusivegateway1">
        <omgdc:Bounds height="40.0" width="40.0" x="321.0" y="148.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway2" id="BPMNShape_exclusivegateway2">
        <omgdc:Bounds height="40.0" width="40.0" x="442.0" y="310.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway3" id="BPMNShape_exclusivegateway3">
        <omgdc:Bounds height="40.0" width="40.0" x="609.0" y="148.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent2" id="BPMNShape_endevent2">
        <omgdc:Bounds height="35.0" width="35.0" x="550.0" y="390.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent4" id="BPMNShape_endevent4">
        <omgdc:Bounds height="35.0" width="35.0" x="778.0" y="269.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent5" id="BPMNShape_endevent5">
        <omgdc:Bounds height="35.0" width="35.0" x="979.0" y="151.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="icDoc" id="BPMNShape_icDoc">
        <omgdc:Bounds height="55.0" width="105.0" x="223.0" y="303.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway6" id="BPMNShape_exclusivegateway6">
        <omgdc:Bounds height="40.0" width="40.0" x="255.0" y="397.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="startevent1" id="BPMNShape_startevent1">
        <omgdc:Bounds height="35.0" width="35.0" x="39.0" y="149.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent6" id="BPMNShape_endevent6">
        <omgdc:Bounds height="35.0" width="35.0" x="445.0" y="56.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent7" id="BPMNShape_endevent7">
        <omgdc:Bounds height="35.0" width="35.0" x="361.0" y="400.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="flow12" id="BPMNEdge_flow12">
        <omgdi:waypoint x="254.0" y="166.0"></omgdi:waypoint>
        <omgdi:waypoint x="321.0" y="168.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow13" id="BPMNEdge_flow13">
        <omgdi:waypoint x="361.0" y="168.0"></omgdi:waypoint>
        <omgdi:waypoint x="410.0" y="167.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="14.0" width="100.0" x="360.0" y="152.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow17" id="BPMNEdge_flow17">
        <omgdi:waypoint x="462.0" y="454.0"></omgdi:waypoint>
        <omgdi:waypoint x="462.0" y="350.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow18" id="BPMNEdge_flow18">
        <omgdi:waypoint x="515.0" y="167.0"></omgdi:waypoint>
        <omgdi:waypoint x="609.0" y="168.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow19" id="BPMNEdge_flow19">
        <omgdi:waypoint x="629.0" y="188.0"></omgdi:waypoint>
        <omgdi:waypoint x="628.0" y="280.0"></omgdi:waypoint>
        <omgdi:waypoint x="628.0" y="481.0"></omgdi:waypoint>
        <omgdi:waypoint x="515.0" y="481.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="56.0" width="100.0" x="630.0" y="389.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow21" id="BPMNEdge_flow21">
        <omgdi:waypoint x="462.0" y="350.0"></omgdi:waypoint>
        <omgdi:waypoint x="567.0" y="390.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="42.0" width="100.0" x="489.0" y="352.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow25" id="BPMNEdge_flow25">
        <omgdi:waypoint x="462.0" y="310.0"></omgdi:waypoint>
        <omgdi:waypoint x="462.0" y="195.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="56.0" width="100.0" x="467.0" y="243.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow30" id="BPMNEdge_flow30">
        <omgdi:waypoint x="482.0" y="330.0"></omgdi:waypoint>
        <omgdi:waypoint x="865.0" y="329.0"></omgdi:waypoint>
        <omgdi:waypoint x="864.0" y="196.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="56.0" width="100.0" x="745.0" y="331.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow31" id="BPMNEdge_flow31">
        <omgdi:waypoint x="629.0" y="188.0"></omgdi:waypoint>
        <omgdi:waypoint x="795.0" y="269.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="70.0" width="100.0" x="649.0" y="220.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow32" id="BPMNEdge_flow32">
        <omgdi:waypoint x="649.0" y="168.0"></omgdi:waypoint>
        <omgdi:waypoint x="809.0" y="168.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="84.0" width="100.0" x="678.0" y="90.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow33" id="BPMNEdge_flow33">
        <omgdi:waypoint x="920.0" y="168.0"></omgdi:waypoint>
        <omgdi:waypoint x="979.0" y="168.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow34" id="BPMNEdge_flow34">
        <omgdi:waypoint x="341.0" y="188.0"></omgdi:waypoint>
        <omgdi:waypoint x="341.0" y="336.0"></omgdi:waypoint>
        <omgdi:waypoint x="328.0" y="330.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="14.0" width="100.0" x="343.0" y="244.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow35" id="BPMNEdge_flow35">
        <omgdi:waypoint x="275.0" y="358.0"></omgdi:waypoint>
        <omgdi:waypoint x="275.0" y="397.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow36" id="BPMNEdge_flow36">
        <omgdi:waypoint x="275.0" y="437.0"></omgdi:waypoint>
        <omgdi:waypoint x="275.0" y="481.0"></omgdi:waypoint>
        <omgdi:waypoint x="410.0" y="481.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="42.0" width="100.0" x="292.0" y="444.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow37" id="BPMNEdge_flow37">
        <omgdi:waypoint x="255.0" y="417.0"></omgdi:waypoint>
        <omgdi:waypoint x="201.0" y="417.0"></omgdi:waypoint>
        <omgdi:waypoint x="201.0" y="194.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="42.0" width="100.0" x="110.0" y="303.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow38" id="BPMNEdge_flow38">
        <omgdi:waypoint x="74.0" y="166.0"></omgdi:waypoint>
        <omgdi:waypoint x="149.0" y="166.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow39" id="BPMNEdge_flow39">
        <omgdi:waypoint x="341.0" y="148.0"></omgdi:waypoint>
        <omgdi:waypoint x="341.0" y="73.0"></omgdi:waypoint>
        <omgdi:waypoint x="445.0" y="73.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="14.0" width="60.0" x="350.0" y="57.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow40" id="BPMNEdge_flow40">
        <omgdi:waypoint x="295.0" y="417.0"></omgdi:waypoint>
        <omgdi:waypoint x="361.0" y="417.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="14.0" width="59.0" x="295.0" y="417.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>