ALTER SESSION SET CURRENT_SCHEMA=ONEASSIST_SP;
CREATE OR REPLACE TRIGGER OA_SERVICE_REQUEST_HST_BUTRG BEFORE UPDATE ON OA_SERVICE_REQUEST_DTL FOR EACH ROW
BEGIN
INSERT INTO OA_SERVICE_REQUEST_HST(
SERVICE_REQUEST_ID,
SERVICE_REQUEST_TYPE_ID,
REQUEST_DESCRIPTION,
REF_PRIMARY_TRACKING_NO,
REF_SECONDARY_TRACKING_NO,
INITIATING_SYS,
STATUS,
CREATED_ON,
CREATED_BY,
MODIFIED_ON,
MODIFIED_BY,
ASSIGNEE,
SCHEDULE_SLOT_START_DATETIME,
SCHEDULE_SLOT_END_DATETIME,
SERVICE_PARTNER_CODE,
SERVICE_PARTNER_BU_CODE,
WORKFLOW_PROCESS_ID,
WORKFLOW_DATA,
INITIATING_SYSTEM,
REFERENCE_NO,
WORKFLOW_STAGE,
WORKFLOW_ALERT,
WORKFLOW_STAGE_STATUS,
WORKFLOW_PROC_DEF_KEY,
DUE_DATETIME,
ACTUAL_START_DATETIME,
ACTUAL_END_DATETIME,
FEEDBACK_CODE,
FEEDBACK_RATING,
FEEDBACK_COMMENTS,
CLOUD_STORAGE_ARCHIVE_ID,
CLOUD_JOB_STATUS,
THIRDPARTY_PROPERTIES,
REMARK,
EXTERNAL_SR_REFERENCE_ID,
PENDENCY,
ADVICE_ID
)
values(
:new.SERVICE_REQUEST_ID,
:new.SERVICE_REQUEST_TYPE_ID,
:new.REQUEST_DESCRIPTION,
:new.REF_PRIMARY_TRACKING_NO,
:new.REF_SECONDARY_TRACKING_NO,
:new.INITIATING_SYS,
:new.STATUS,
:new.CREATED_ON,
:new.CREATED_BY,
:new.MODIFIED_ON,
:new.MODIFIED_BY,
:new.ASSIGNEE,
:new.SCHEDULE_SLOT_START_DATETIME,
:new.SCHEDULE_SLOT_END_DATETIME,
:new.SERVICE_PARTNER_CODE,
:new.SERVICE_PARTNER_BU_CODE,
:new.WORKFLOW_PROCESS_ID,
:new.WORKFLOW_DATA,
:new.INITIATING_SYSTEM,
:new.REFERENCE_NO,
:new.WORKFLOW_STAGE,
:new.WORKFLOW_ALERT,
:new.WORKFLOW_STAGE_STATUS,
:new.WORKFLOW_PROC_DEF_KEY,
:new.DUE_DATETIME,
:new.ACTUAL_START_DATETIME,
:new.ACTUAL_END_DATETIME,
:new.FEEDBACK_CODE,
:new.FEEDBACK_RATING,
:new.FEEDBACK_COMMENTS,
:new.CLOUD_STORAGE_ARCHIVE_ID,
:new.CLOUD_JOB_STATUS,
:new.THIRDPARTY_PROPERTIES,
:new.REMARK,
:new.EXTERNAL_SR_REFERENCE_ID,
:new.PENDENCY,
:new.ADVICE_ID
);
END;